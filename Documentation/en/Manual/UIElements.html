<!DOCTYPE html><html lang="en" class="no-js">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],   j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-MC35ML');</script><script src="https://store.unity.com/themes/contrib/unity_base/js/unity-cdp.js"></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unity - Manual:  Getting started with UIElements</title>
<meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="../StaticFilesManual/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFilesManual/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFilesManual/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFilesManual/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="../StaticFilesManual/js/jquery.js?ts=1539961666"></script><script type="text/javascript" src="../StaticFilesManual/js/core.js?ts=1539961666"></script><script type="text/javascript" src="docdata/toc.js?ts=1539961666"></script><script type="text/javascript" src="docdata/global_toc.js?ts=1539961666"></script><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,400italic" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="../StaticFilesManual/css/core.css?ts=1539961666">
<link rel="stylesheet" href="../StaticFilesManual/js/feedback/five-star-rating-master/css/rating.min.css">
<script src="../StaticFilesManual/js/feedback/five-star-rating-master/js/src/rating.js"></script>
</head>
<body>
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MC35ML" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div id="DocsAnalyticsData" data-area="Experimental" data-pagetype="normal"></div>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div class="logo"><a href="https://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul>
<li><a href="../Manual/index.html" class="selected">Manual</a></li>
<li><a href="../ScriptReference/index.html">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity3d.com/">unity3d.com</a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="version-number">Version: <b>2018.2</b> (switch to <a href="https://docs.unity3d.com/2018.3/Documentation/Manual">2018.3b</a> or <a href="https://docs.unity3d.com/2017.4/Documentation/Manual">2017.4</a>)</div>
<div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">Language: <span class="b">English</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/UIElements.html">English</a></li>
<li><a href="/ja/current/Manual/UIElements.html">日本語</a></li>
<li><a href="/es/current/Manual/UIElements.html">Español</a></li>
<li><a href="/kr/current/Manual/UIElements.html">한국어</a></li>
<li><a href="/ru/current/Manual/UIElements.html">Русский</a></li>
</ul></div>
</div>
</div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc"><h2>Unity Manual</h2></div></div></div></div></div>
<div id="content-wrap" class="content-wrap"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity User Manual (2018.2)</a></li>
<li><a href="Experimental.html"> Experimental</a></li>
<li> Getting started with UIElements</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="Experimental.html"></a></span><div class="tip"> Experimental</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="ScriptedImporters.html"></a></span><div class="tip"> Scripted Importers</div>
</div>
</div></div>
<div class="otherversionswrapper" onmouseover="setOtherVersionsDisplay(true)" onmouseout="setOtherVersionsDisplay(false)">
<a>Other Versions</a><div class="otherversionscontent" id="OtherVersionsContent" style="display: none;">Cannot access other versions offline!</div>
</div>
<div class="scrollToFeedback"><a id="scrollToFeedback">Leave feedback</a></div>
<h1>Getting started with UIElements</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>UIElements is a new experimental feature introduced in Unity 2017.1.</p>

<p>It is recommended that you look at the example project as you read through this document.</p>

<p>The example project is located at<a href="https://github.com/Unity-Technologies/UIElementsExamples"> https://github.com/Unity-Technologies/UIElementsExamples</a>.</p>

<p>
<strong>Disclaimer</strong>: *this experimental feature is incomplete and subject to API changes. While we appreciate any feedback, please remember that UIElements is still in active development.</p>

<p>Also, please note that changes introduced in 2017.2 won’t be backported to 2017.1.*</p>

<h1>Introduction</h1>

<p>So far the Unity editor user interface has been mostly built around the immediate mode <span class="tooltip"><strong>UI</strong><span class="tooltiptext">(User Interface) Allows a user to interact with your application. <a href="UISystem.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#UI">Glossary</a></span></span></span> system. While IMGUI shines in some contexts it has some serious design limitations which are affecting the productivity of everyone working on Editor features.</p>

<p>This was our motivation to start working on UIElements, a retained-mode UI system that opens the door to improved performance and new features such as stylesheets, dynamic/contextual event handling, accessibility and much more.</p>

<h1>Visual tree</h1>

<p>The visual tree is an object graph made of lightweight nodes called “visual elements”. This is a graph that can be traversed for event processing, layout and painting. These nodes are allocated on the C# heap, either manually or via <span class="tooltip"><strong>asset</strong><span class="tooltiptext">Any media or data that can be used in your game or project. An asset may come from a file created outside of Unity, such as a 3D model, an audio file or an image. You can also create some asset types in Unity, such as an Animator Controller, an Audio Mixer or a Render Texture. <a href="AssetWorkflow.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Asset">Glossary</a></span></span></span> loading in the future.</p>

<h3>VisualContainer and VisualElement</h3>

<p>
<code>VisualElement</code> is the common base class for all nodes of the visual tree. The <code>VisualElement</code> base class contains properties for styles, layout data, local transformations, event handlers, and so on.</p>

<p>
<code>VisualElement</code> has several subclasses, including <code>VisualContainer</code> and specialized controls, which define additional behaviour or functionality. However, it is not strictly required to derive from any class to work with UIElements, as built-in classes should contain most of the required functionality.</p>

<p>A <code>VisualContainer</code> object contains <code>VisualElement</code> child objects. The <code>VisualContainer</code> class has several methods to work with its list of children.</p>

<p>
<strong>Note</strong>: UIElements classes are currently inside of the <code>UnityEngine.Experimental.UIElements</code> namespace.</p>

<h3>Connectivity</h3>

<p>A newly created element is ignored until connected to the root object, called the <strong>“panel”</strong>. You usually add elements to an existing container object, such as EditorWindow.rootVisualContainer, to attach your UI to the panel.</p>

<p>
<strong>Note</strong>: to prevent accidental usage of this property while UIElements is experimental, it’s necessary to go through the extension method <code>GetRootVisualContainer()</code> from the <code>UnityEditor.Experimental.UIElements</code> namespace.</p>

<p>To test if a <code>VisualElement</code> is connected to a root, you can test for the <code>panel</code> property of this element (<code>null</code> if not connected).</p>

<h3>Painting order</h3>

<p>Elements of the tree are drawn in the following order:</p>

<ul>
<li><p>parents are drawn before their children</p></li>
<li><p>siblings are painted in the order of their parent’s children list</p></li>
</ul>

<p>The only way to change painting order is thus to re-order <code>VisualElement</code> objects in their parents.</p>

<p>It is possible to draw a given subtree in a <code>RenderTexture</code> and re-use the <span class="tooltip"><strong>pixels</strong><span class="tooltiptext">The smallest unit in a computer image. Pixel size depends on your screen resolution. Pixel lighting is calculated at every screen pixel. <a href="LightPerformance.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#pixel">Glossary</a></span></span></span> for later repaint events by enabling <code>VisualContainer.usePixelCaching</code>.</p>

<p>
<strong>Note</strong>: It is possible to implement custom painting by subclassing <code>VisualElement</code> and overriding the DoRepaint() method, however we do not recommend this approach as it will change in future releases.</p>

<h3>Position, transforms and coordinate systems</h3>

<p>The layout system affects each VisualElement.position property (of type Rect). This rect is expressed as pixels in relation to the coordinate space of its parent. You can assign this position manually as shown in the first example script.</p>

<p>Each <code>VisualElement</code> also has a transform property (of type <code>Matrix4x4</code>) which transform its local coordinates space (before taking in account the position rectangle) from its parent space.</p>

<p>The final <code>VisualElement</code> window space coordinates can be retrieved via the <code>globalBound</code> property, taking account of transforms and positions of the full ancestry of a <code>VisualElement</code>.</p>

<p>
<strong>Note</strong>: in 2017.2, we will replace <code>transform</code> by Translate, Rotate and Scale properties for VisualElement, similar to Unity’s Transform <span class="tooltip"><strong>component</strong><span class="tooltiptext">A functional part of a GameObject. A GameObject can contain any number of components. Unity has many built-in components, and you can create your own by writing scripts that inherit from MonoBehaviour. <a href="UsingComponents.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#component">Glossary</a></span></span></span>.</p>

<p>The <code>VisualElementExtensions</code> static class contains several extensions to perform transformations between coordinates system.</p>

<h1>Layout</h1>

<p>
<code>VisualElement</code> and <code>VisualContainer</code> classes contain several properties to control the layout. By default all elements are part of the layout, with the following default behaviours:</p>

<ul>
<li><p>Containers will distribute their children vertically</p></li>
<li><p>Container’s position rectangles will encompass their children’s rectangles (unless explicitly restricted by other layout properties)</p></li>
<li><p>VisualElement with text will measure their text and size themselves accordingly (unless explicitly restricted by other layout properties)</p></li>
<li><p>Default controls also come with pre-defined styles which will affect their layout</p></li>
</ul>

<p>Layout in UIElements is relying on the <a href="https://github.com/facebook/yoga">Yoga open source project</a>, which implements a subset of the HTML/CSS layout system called Flexbox. </p>

<p>Here are some resources to help you get started with Flexbox:</p>

<ul>
<li><p>
<a href="https://facebook.github.io/yoga/">Yoga’s own documentation</a> : mapping of properties is almost entirely 1-to–1</p></li>
<li><p>
<a href="https://css-tricks.com/snippets/css/a-guide-to-flexbox/">CSS-Tricks guide to Flexbox</a> : most properties are supported with some minor differences</p></li>
</ul>

<p>However here is a quick layout cheat sheet:</p>

<ul>
<li><p>In the most basic cases, you can simply assign <code>width</code> and <code>height</code> to elements in order to give them a size</p></li>
<li><p>Flexible size can be given via the <code>flex</code> property, which acts as weight of an element in regards to its siblings. </p></li>
<li><p>You can switch to horizontal layout by assigning the <code>flexDirection</code> property to Row</p></li>
<li><p>Relative positioning lets you offset an element based on its original layout position</p></li>
<li><p>Absolute positioning lets you place an element relative to its parent position rectangle, in which case it does not contribute affect the layout of its siblings or parent</p></li>
<li><p>Elements which have their “position” property assigned directly via the API will be automatically considered as “absolute”</p></li>
<li><p>To prevent elements from stretching in the cross-axis, assign <code>FlexStart</code> to the <code>alignSelf</code> property of each <code>VisualElement</code> child object or the parent’s <code>alignItems</code> property</p></li>
</ul>

<h1>Styles</h1>

<figure>
<img src="../uploads/Main/UIElementsStyles.png" alt="VisualElement styles in a stylesheet">
<figcaption>VisualElement styles in a stylesheet</figcaption>
</figure>

<p>A <code>VisualElement</code> has style properties that can either be set directly in C# or applied from a stylesheet. In addition to layout properties, there also exist several properties affecting the way an element is drawn on screen, such as <code>backgroundColor</code> or <code>borderColor</code>.</p>

<p>
<strong>Note</strong>: <em>in 2017.2, all style properties of <code>VisualElement</code> will be extracted to a separate data structure to remove ambiguity between style-driven properties and non-style properties. </em>
</p>

<p>Style sheets are supported in Unity via the USS file format. Please refer to this document for detailed information about USS : <a href="https://docs.google.com/document/d/1uxSIJNY6zDuyM4FO_zJ8sFpcZjy6rPslmw0kqZhycbM/edit?usp=sharing">Unity Style Sheets Reference</a>.</p>

<p>Once you’ve successfully created your style sheets in Unity, you can associate a stylesheet to your VisualContainer via the <code>AddStyleSheetPath()</code> method.</p>

<p>Notes:</p>

<ul>
<li><p>The style sheet needs to be placed inside an “Resources” or “Editor Default Resources” folder in your Assets folder</p></li>
<li><p>The path provided to the aforementioned method is relative to the enclosing folder</p></li>
<li><p>Style sheets modified while used in a running <code>EditorWindow</code> take effect immediately and should re-style your UI accordingly</p></li>
<li><p>Style sheets can be attached to any <code>VisualContainer</code> and thus their rules apply to all descendants of this container</p></li>
</ul>

<h1>Events</h1>

<p>Input events are directly propagated to <code>VisualElement</code> objects. The logic varies slightly depending on the type of event and other factors :</p>

<ul>
<li><p>Mouse events are propagated to the element under the mouse</p></li>
<li><p>Keyboard events are propagated to the focused element</p></li>
<li><p>A control can take the “capture” and receive all events directly (for example, a button takes the capture on mouse down and releases it on mouse up)</p></li>
</ul>

<p>Events are said to be propagated because each ancestor of the target object can intercept an event before its descendants (Capture phase) or after its descendants if not stopped (BubbleUp phase). You might be familiar with this pattern from the HTML or Flash event models.</p>

<figure>
<img src="../uploads/Main/UIElementsEvents.png" alt="Event capture phase and bubble up phase">
<figcaption>Event capture phase and bubble up phase</figcaption>
</figure>

<p>If an element has taken the capture (via the extension method <code>TakeCapture()</code>), it will receive the event directly and no propagation will occur. However, if it does not use the event it will be propagated normally.</p>

<p>An element that is not <code>visible</code> or <code>enabled</code> will not receive events. However, the events will still be propagated in the hierarchy..</p>

<h2>Adding event handlers</h2>

<p>There are two ways two write event handling code:</p>

<ul>
<li><p>Override the <code>HandleEvent()</code> method in your <code>VisualElement</code> subclass</p></li>
<li><p>Subclass Manipulator and override the <code>HandleEvent()</code> method in your subclass, then add <code>VisualElement.AddManipulator()</code>
</p></li>
</ul>

<p>You must return <code>EventPropagation.Continue</code> or <code>EventPropagation.Stop</code> depending on how you want to control the propagation. The <code>finalTarget</code> argument will be set to the target object.</p>

<p>
<strong>Note</strong>: <em>in 2017.2, we will move away from the IMGUI Event class and remove the need to write subclass to handle events. Instead, new event types will be introduced alongside an event registration model based on callbacks.</em>
</p>

<h2>Picking mode and custom shapes</h2>

<p>The <code>VisualElement</code> class has a pickingMode property which supports two values :</p>

<ul>
<li><p>
<code>PickingMode.Position</code> (default) : perform picking based on the position rectangle</p></li>
<li><p>
<code>PickingMode.Ignore</code> : prevent from being picked as the result of a mouse event</p></li>
</ul>

<p>It’s possible to override the <code>VisualElement.ContainsPoint()</code> method to perform custom intersection logic.</p>

<h1>Controls</h1>

<p>A few standard controls are built in UIElements :</p>

<ul>
<li><p><code>Button</code></p></li>
<li><p><code>Toggle</code></p></li>
<li><p><code>Label</code></p></li>
<li><p><code>ScrollView</code></p></li>
<li><p>
<code>TextField</code> and <code>EditorTextField</code>
</p></li>
</ul>

<figure>
<img src="../uploads/Main/UIElementsControls.png" alt="Some of the standard controls built in to UIElements">
<figcaption>Some of the standard controls built in to UIElements</figcaption>
</figure>

<p>Please refer to the example project for example usage of controls.</p>

<h1>IMGUI Support</h1>

<figure>
<img src="../uploads/Main/UIElementsIMGUI.png" alt="IMGUI code can be used inside of a VisualElement">
<figcaption>IMGUI code can be used inside of a VisualElement</figcaption>
</figure>

<p>The <code>IMGUIContainer</code> class lets you use IMGUI code inside of a <code>VisualElement</code>. Everything you can normally do inside of OnGUI() is supported. It’s also possible to arrange multiple <code>IMGUIContainer</code> and lay them out correctly by mixing <code>GUILayout</code> and <code>UIElements</code> layout.</p>

<p>However, it’s not possible use UIElements inside of an <code>IMGUIContainer</code>.</p>

<hr>

<ul>
<li><span class="page-edit">2017–08–08 Page published with no <a href="DocumentationEditorialReview.html">editorial review</a>
</span></li>
<li><span class="page-history">New feature in Unity <a href="https://docs.unity3d.com/2017.1/Documentation/Manual/30_search.html?q=newin20171">2017.1</a> <span class="search-words">NewIn20171</span></span></li>
</ul>
<div class="feedbackbox" id="feedbackbox">
<div id="rating"><p>Did you find this page useful? Please give it a rating:<br><div id="ratecontent" class="c-rating"></div>
</p></div>
<div id="ratingThanks" style="display:none"><p>Thanks for rating this page!</p></div>
<div id="problem"><p><a name="problem">Report a problem on this page</a></p></div>
<div id="problemType" style="display:none"><p>What kind of problem would you like to report?<ul type="problems">
<li><a name="needcode" id="problemneedcode">This page needs code samples</a></li>
<li><a name="code" id="problemcode">Code samples do not work</a></li>
<li><a name="missing" id="problemmissing">Information is missing</a></li>
<li><a name="incorrect" id="problemincorrect">Information is incorrect</a></li>
<li><a name="unclear" id="problemunclear">Information is unclear or confusing</a></li>
<li><a name="language" id="problemlanguage">There is a spelling/grammar error on this page</a></li>
<li><a name="other" id="problemother">Something else</a></li>
</ul>
<p><known_issues><p>Is something described here not working as you expect it to? It might be a <b>Known Issue</b>. Please check with the Issue Tracker at <a href="https://issuetracker.unity3d.com">issuetracker.unity3d.com</a>.</p></known_issues></p>
</p></div>
<div id="problemThanks" style="display:none"><p>Thanks for letting us know! This page has been marked for review based on your feedback.<br><br>If you have time, you can provide more information to help us fix the problem faster.<br><br><a id="problemThanksMoreInfoButton">Provide more information</a><br>
</p></div>
<div id="problemMoreInfo" style="display:none">
<p id="problemNeedCodeForm" style="display:none">You've told us this page needs code samples. If you'd like to help us further, you could provide a code sample, or tell us about what kind of code sample you'd like to see:</p>
<p id="problemCodeForm" style="display:none">You've told us there are code samples on this page which don't work. If you know how to fix it, or have something better we could use instead, please let us know:</p>
<p id="problemMissingForm" style="display:none">You've told us there is information missing from this page. Please tell us more about what's missing:</p>
<p id="problemIncorrectForm" style="display:none">You've told us there is incorrect information on this page. If you know what we should change to make it correct, please tell us:</p>
<p id="problemUnclearForm" style="display:none">You've told us this page has unclear or confusing information. Please tell us more about what you found unclear or confusing, or let us know how we could make it clearer:</p>
<p id="problemLanguageForm" style="display:none">You've told us there is a spelling or grammar error on this page. Please tell us what's wrong:</p>
<p id="problemOtherForm" style="display:none">You've told us this page has a problem. Please tell us more about what's wrong:</p>
<form>
<textarea id="problemFormSuggestionField" cols="40" rows="5"></textarea><input type="hidden" id="problemFormDescription"><input type="submit" id="problemFormDescriptionSubmit" value="Submit">
</form>
</div>
<div id="problemMoreInfoThanks" style="display:none"><p>Thanks for helping to make the Unity documentation better!</p></div>
<script>InitialiseStarRating();</script>
</div>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="Experimental.html"></a></span><div class="tip"> Experimental</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="ScriptedImporters.html"></a></span><div class="tip"> Scripted Importers</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">Copyright © 2018 Unity Technologies. Publication: 2018.2-002K. Built: 2018-10-10.</div>
<div class="menu">
<a href="https://unity3d.com/learn">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a>
</div>
</div></div>
</div></div></div>
</div>
</body>
</html>
