<!DOCTYPE html><html lang="en" class="no-js">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],   j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-MC35ML');</script><script src="https://store.unity.com/themes/contrib/unity_base/js/unity-cdp.js"></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unity - Manual:  Remote Settings scripting</title>
<meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="../StaticFilesManual/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFilesManual/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFilesManual/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFilesManual/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="../StaticFilesManual/js/jquery.js?ts=1539961666"></script><script type="text/javascript" src="../StaticFilesManual/js/core.js?ts=1539961666"></script><script type="text/javascript" src="docdata/toc.js?ts=1539961666"></script><script type="text/javascript" src="docdata/global_toc.js?ts=1539961666"></script><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,400italic" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="../StaticFilesManual/css/core.css?ts=1539961666">
<link rel="stylesheet" href="../StaticFilesManual/js/feedback/five-star-rating-master/css/rating.min.css">
<script src="../StaticFilesManual/js/feedback/five-star-rating-master/js/src/rating.js"></script>
</head>
<body>
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MC35ML" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div id="DocsAnalyticsData" data-area="UnityServices" data-pagetype="normal"></div>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div class="logo"><a href="https://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul>
<li><a href="../Manual/index.html" class="selected">Manual</a></li>
<li><a href="../ScriptReference/index.html">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity3d.com/">unity3d.com</a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="version-number">Version: <b>2018.2</b> (switch to <a href="https://docs.unity3d.com/2018.3/Documentation/Manual">2018.3b</a> or <a href="https://docs.unity3d.com/2017.4/Documentation/Manual">2017.4</a>)</div>
<div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">Language: <span class="b">English</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/UnityAnalyticsRemoteSettingsScripting.html">English</a></li>
<li><a href="/ja/current/Manual/UnityAnalyticsRemoteSettingsScripting.html">日本語</a></li>
<li><a href="/es/current/Manual/UnityAnalyticsRemoteSettingsScripting.html">Español</a></li>
<li><a href="/kr/current/Manual/UnityAnalyticsRemoteSettingsScripting.html">한국어</a></li>
<li><a href="/ru/current/Manual/UnityAnalyticsRemoteSettingsScripting.html">Русский</a></li>
</ul></div>
</div>
</div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc"><h2>Unity Manual</h2></div></div></div></div></div>
<div id="content-wrap" class="content-wrap"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity User Manual (2018.2)</a></li>
<li><a href="UnityServices.html">Unity Services</a></li>
<li><a href="UnityAnalytics.html">Unity Analytics</a></li>
<li><a href="UnityAnalyticsRemoteSettings.html"> Remote Settings</a></li>
<li><a href="UnityAnalyticsRemoteSettingsUsing.html"> Using Remote Settings in a Unity project</a></li>
<li> Remote Settings scripting</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="UnityAnalyticsRemoteSettingsComponent.html"></a></span><div class="tip"> Remote Settings component</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UnityAnalyticsRemoteSettingsTesting.html"></a></span><div class="tip"> Testing Remote Settings</div>
</div>
</div></div>
<div class="otherversionswrapper" onmouseover="setOtherVersionsDisplay(true)" onmouseout="setOtherVersionsDisplay(false)">
<a>Other Versions</a><div class="otherversionscontent" id="OtherVersionsContent" style="display: none;">Cannot access other versions offline!</div>
</div>
<div class="scrollToFeedback"><a id="scrollToFeedback">Leave feedback</a></div>
<h1>Remote Settings scripting</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>Use the Unity Scripting API <a href="../ScriptReference/RemoteSettings.html">RemoteSettings</a> class to access your remote settings in code. The <code>RemoteSettings</code> class provides functions to access your remote settings, like <code>RemoteSettings.GetString()</code>, as well as events that you can use to trigger functions when your settings are fetched or updated.</p>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Event</th>
	<th style="text-align:left;">Purpose</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">BeforeFetchFromServer</td>
	<td style="text-align:left;">Dispatched immediately before the <code>RemoteSettings</code> class makes its network request to retrieve your remote settings.</td>
</tr>
<tr>
	<td style="text-align:left;">Completed</td>
	<td style="text-align:left;">Dispatched when the network request is complete. <code>Completed</code> is always dispatched, even when the network request fails and when there are no changes to the remote settings. You can use the <code>serverResponse</code> code passed to your delegate function to determine whether the request succeeded or failed. The parameter contains one of the standard HTTP response codes, such as 200 for success.</td>
</tr>
<tr>
	<td style="text-align:left;">Updated</td>
	<td style="text-align:left;">Dispatched after the network request completes successfully, but ONLY when your remote settings have changed since the previous check.<br><br>Note: Prior to Unity 2018.1, the <code>Updated</code> event was always dispatched, even when there were no settings changes. If you rely on a delegate function to apply settings in your game whether or not there have been changes, you must use the <code>Completed</code> event rather than the <code>Updated</code> event.</td>
</tr>
</tbody>
</table>

<p>You should register your handler functions for these events as early as possible during application launch, such as in the <code>Awake()</code> function of a MonoBehaviour loaded in your first Unity <span class="tooltip"><strong>scene</strong><span class="tooltiptext">A Scene contains the environments and menus of your game. Think of each unique Scene file as a unique level. In each Scene, you place your environments, obstacles, and decorations, essentially designing and building your game in pieces. <a href="CreatingScenes.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Scene">Glossary</a></span></span></span>.</p>

<p>Because fetching the settings requires a <a href="UnityAnalyticsRemoteSettingsNetRequests.html">network transaction</a>, the <code>RemoteSettings</code> object dispatches its events asynchronously. Your handler functions might not be called in the same order relative to other events on every platform or even on every launch of the same platform. Always initialize your configuration variables with reasonable default values, and allow for the possibility that your event handlers can be called at different times during application startup.</p>

<p><strong>Code example</strong></p>

<p>The following example shows a class that defines a number of properties for tuning game difficulty and updates these properties based on remote settings:</p>

<pre><code>using UnityEngine;

public class RemoteTuningVariables : MonoBehaviour {

    public float DefaultSpawnRateFactor = 1.0f;
    public float DefaultEnemySpeedFactor = 1.0f;
    public float DefaultEnemyStrengthFactor = 1.0f;
    public static float SpawnRateFactor{ get; private set; }
    public static float EnemySpeedFactor{ get; private set; }
    public static float EnemyStrengthFactor{ get; private set; }

    void Start () {
        SpawnRateFactor = DefaultSpawnRateFactor;
        EnemySpeedFactor = DefaultEnemySpeedFactor;
        EnemyStrengthFactor = DefaultEnemyStrengthFactor;

        RemoteSettings.Completed += HandleRemoteSettings;
    }

    private void HandleRemoteSettings(bool wasUpdatedFromServer, bool settingsChanged, int serverResponse){
        SpawnRateFactor 
            = RemoteSettings.GetFloat (&quot;SpawnRateFactor&quot;, DefaultSpawnRateFactor);
        EnemySpeedFactor
            = RemoteSettings.GetFloat (&quot;EnemySpeedFactor&quot;, DefaultEnemySpeedFactor);
        EnemyStrengthFactor 
            = RemoteSettings.GetFloat (&quot;EnemyStrengthFactor&quot;, DefaultEnemyStrengthFactor);
    }
} 
</code></pre>

<p>Notice that the class provides default values in the <code>RemoteSettings.GetFloat()</code> method calls. If the <code>RemoteSettings</code> object cannot find the specified key (if you misspell a key name, for example), then the method still assigns your default values to the tuning variables. Otherwise, the <code>GetFloat()</code> and <code>GetInt()</code> methods assign zero to numbers, <code>GetString()</code> assigns an empty string to strings, and <code>GetBool()</code> assigns false to boolean variables.</p>

<p>The class also assigns the same default values to the properties in the <code>Start()</code> method in case another class accesses the settings before the remote settings are fetched and no previously cached configuration is available locally. Assigning the default values in the <code>Start()</code> method ensures that the properties always have reasonable values.</p>

<h2>Ensuring setting consistency</h2>

<p>If you have several classes in your game that access remote settings at different times, it is possible that some objects will access your settings before the asynchronous network request completes and some will access the settings afterwards, possibly resulting in inconsistent setting values. To avoid this inconsistency problem, you either have to wait for the asynchronous network request to complete before accessing any settings or you can simply use the existing settings you have at the start of the current session. In this latter case, the local settings are updated in the background and a player will see them in the next session. </p>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Method</th>
	<th style="text-align:left;">Benefits</th>
	<th style="text-align:left;">Drawbacks</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">Wait for request completion</td>
	<td style="text-align:left;">- Setting values are consistent<br>- Always using latest settings</td>
	<td style="text-align:left;">- Indeterminate delay in setting availability<br>- Asynchronous code complexity</td>
</tr>
<tr>
	<td style="text-align:left;">Use current settings</td>
	<td style="text-align:left;">- Setting values are consistent<br>- Settings are available immediately</td>
	<td style="text-align:left;">- New setting values not used until the second session<br>- The first time a player runs the game, no settings are available. (Use default values.)</td>
</tr>
</tbody>
</table>

<p>The following example illustrates a provider class that assigns its properties based on the last version of your remote settings fetched from the <span class="tooltip"><strong>Analytics</strong><span class="tooltiptext">A data platform that provides analytics for your Unity game. <a href="UnityAnalytics.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Analytics">Glossary</a></span></span></span> service. The <code>RemoteSettings</code> class still updates the settings in the background, so any settings changes are used in the next session (rather than the current session). The following example uses a singleton pattern so that all parts of your game that use these settings get the same values no matter when the <code>RemoteSettings</code> class receives the remote update.</p>

<pre><code>using UnityEngine;

public class RemoteSettingProvider : MonoBehaviour {
    public float DefaultSpawnRateFactor = 1.0f;
    public float DefaultEnemySpeedFactor = 1.0f;
    public float DefaultEnemyStrengthFactor = 1.0f;
    public float SpawnRateFactor{ get; private set; }
    public float EnemySpeedFactor{ get; private set; }
    public float EnemyStrengthFactor{ get; private set; }

    // Singleton pattern
    private static RemoteSettingProvider _instance;
    public static RemoteSettingProvider Instance
    {
        get { return _instance; }
    }

    void Awake()
    {
        if (_instance != null &amp;&amp; _instance != this)
        {
            Destroy(this.gameObject);
            return;
        }

        _instance = this;
        DontDestroyOnLoad(this.gameObject);

        //Use the current settings, before remote update, or default values if
        //the settings don't exist (yet)
        SpawnRateFactor
            = RemoteSettings.GetFloat(&quot;SpawnRateFactor&quot;, DefaultSpawnRateFactor);
        EnemySpeedFactor
            = RemoteSettings.GetFloat(&quot;EnemySpeedFactor&quot;, DefaultEnemySpeedFactor);
        EnemyStrengthFactor
            = RemoteSettings.GetFloat(&quot;EnemyStrengthFactor&quot;, DefaultEnemyStrengthFactor);
    }
} 
</code></pre>

<p>Using this method, the default settings are always used the first time a player runs your game after installation. </p>

<p>You can also use a hybrid approach that checks whether local settings exist using <code>RemoteSettings.GetCount()</code>. If the settings exist locally, you can use them immediately, but if not then you add an event handler to wait for the settings <code>Updated</code> event:</p>

<pre><code>SpawnRateFactor
    = RemoteSettings.GetFloat(&quot;SpawnRateFactor&quot;, DefaultSpawnRateFactor);
EnemySpeedFactor
    = RemoteSettings.GetFloat(&quot;EnemySpeedFactor&quot;, DefaultEnemySpeedFactor);
EnemyStrengthFactor
    = RemoteSettings.GetFloat(&quot;EnemyStrengthFactor&quot;, DefaultEnemyStrengthFactor);


if(RemoteSettings.GetCount() == 0){
    //If there are no settings, get them from remote
    RemoteSettings.Updated += HandleRemoteSettings;
    Ready = false;
} else {
    Ready = true;
}
</code></pre>

<p>Other classes that use your remote settings must check the <code>Ready</code> property of your provider class to determine whether it is safe to access the settings. The following example illustrates a class that waits for the settings and also uses a configurable timeout:</p>

<pre><code>using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class RemoteSettingConsumer : MonoBehaviour {
    public float SpeedFactor = 0;
    public float StrengthFactor = 0;
    public float SpawnRateFactor = 0;
    public float Timeout = 0.125f;

    void Start () {
        StartCoroutine(GetRemoteSettings(Time.time));
    }

    IEnumerator GetRemoteSettings(float startTime){

        while(!RemoteSettingProvider.Instance.Ready &amp;&amp; (Time.time - startTime) &lt; Timeout)
            yield return null;

        SpeedFactor = RemoteSettingProvider.Instance.EnemySpeedFactor;
        StrengthFactor = RemoteSettingProvider.Instance.EnemyStrengthFactor;
        SpawnRateFactor = RemoteSettingProvider.Instance.SpawnRateFactor;
    }
}
</code></pre>

<p>If the timeout elapses before the remote settings become available, then your default values are used. Using a timeout allows the game to get the latest settings in the normal case where the network transaction completes in a very short amount of time, while not delaying startup unduly by waiting for the request itself to timeout in the case of network failure.</p>

<hr>

<ul>
<li><span class="page-edit">2018–08–23 Page published with <a href="DocumentationEditorialReview.html">editorial review</a>
</span></li>
<li><span class="page-history">New feature in 2017.1</span></li>
<li><span class="page-history">2018–08–23 - Updated event no longer dispatched every session as of 2018.1.</span></li>
<li><span class="page-history">2018–08–23 - Service compatible with Unity 5.5 onwards at this date but version compatibility may be subject to change.</span></li>
</ul>
<div class="feedbackbox" id="feedbackbox">
<div id="rating"><p>Did you find this page useful? Please give it a rating:<br><div id="ratecontent" class="c-rating"></div>
</p></div>
<div id="ratingThanks" style="display:none"><p>Thanks for rating this page!</p></div>
<div id="problem"><p><a name="problem">Report a problem on this page</a></p></div>
<div id="problemType" style="display:none"><p>What kind of problem would you like to report?<ul type="problems">
<li><a name="needcode" id="problemneedcode">This page needs code samples</a></li>
<li><a name="code" id="problemcode">Code samples do not work</a></li>
<li><a name="missing" id="problemmissing">Information is missing</a></li>
<li><a name="incorrect" id="problemincorrect">Information is incorrect</a></li>
<li><a name="unclear" id="problemunclear">Information is unclear or confusing</a></li>
<li><a name="language" id="problemlanguage">There is a spelling/grammar error on this page</a></li>
<li><a name="other" id="problemother">Something else</a></li>
</ul>
<p><known_issues><p>Is something described here not working as you expect it to? It might be a <b>Known Issue</b>. Please check with the Issue Tracker at <a href="https://issuetracker.unity3d.com">issuetracker.unity3d.com</a>.</p></known_issues></p>
</p></div>
<div id="problemThanks" style="display:none"><p>Thanks for letting us know! This page has been marked for review based on your feedback.<br><br>If you have time, you can provide more information to help us fix the problem faster.<br><br><a id="problemThanksMoreInfoButton">Provide more information</a><br>
</p></div>
<div id="problemMoreInfo" style="display:none">
<p id="problemNeedCodeForm" style="display:none">You've told us this page needs code samples. If you'd like to help us further, you could provide a code sample, or tell us about what kind of code sample you'd like to see:</p>
<p id="problemCodeForm" style="display:none">You've told us there are code samples on this page which don't work. If you know how to fix it, or have something better we could use instead, please let us know:</p>
<p id="problemMissingForm" style="display:none">You've told us there is information missing from this page. Please tell us more about what's missing:</p>
<p id="problemIncorrectForm" style="display:none">You've told us there is incorrect information on this page. If you know what we should change to make it correct, please tell us:</p>
<p id="problemUnclearForm" style="display:none">You've told us this page has unclear or confusing information. Please tell us more about what you found unclear or confusing, or let us know how we could make it clearer:</p>
<p id="problemLanguageForm" style="display:none">You've told us there is a spelling or grammar error on this page. Please tell us what's wrong:</p>
<p id="problemOtherForm" style="display:none">You've told us this page has a problem. Please tell us more about what's wrong:</p>
<form>
<textarea id="problemFormSuggestionField" cols="40" rows="5"></textarea><input type="hidden" id="problemFormDescription"><input type="submit" id="problemFormDescriptionSubmit" value="Submit">
</form>
</div>
<div id="problemMoreInfoThanks" style="display:none"><p>Thanks for helping to make the Unity documentation better!</p></div>
<script>InitialiseStarRating();</script>
</div>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="UnityAnalyticsRemoteSettingsComponent.html"></a></span><div class="tip"> Remote Settings component</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UnityAnalyticsRemoteSettingsTesting.html"></a></span><div class="tip"> Testing Remote Settings</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">Copyright © 2018 Unity Technologies. Publication: 2018.2-002K. Built: 2018-10-10.</div>
<div class="menu">
<a href="https://unity3d.com/learn">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a>
</div>
</div></div>
</div></div></div>
</div>
</body>
</html>
