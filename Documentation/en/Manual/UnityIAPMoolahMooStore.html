<!DOCTYPE html><html lang="en" class="no-js">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],   j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-MC35ML');</script><script src="https://store.unity.com/themes/contrib/unity_base/js/unity-cdp.js"></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unity - Manual:  CloudMoolah MOO store</title>
<meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="../StaticFilesManual/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFilesManual/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFilesManual/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFilesManual/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="../StaticFilesManual/js/jquery.js?ts=1539961666"></script><script type="text/javascript" src="../StaticFilesManual/js/core.js?ts=1539961666"></script><script type="text/javascript" src="docdata/toc.js?ts=1539961666"></script><script type="text/javascript" src="docdata/global_toc.js?ts=1539961666"></script><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,400italic" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="../StaticFilesManual/css/core.css?ts=1539961666">
<link rel="stylesheet" href="../StaticFilesManual/js/feedback/five-star-rating-master/css/rating.min.css">
<script src="../StaticFilesManual/js/feedback/five-star-rating-master/js/src/rating.js"></script>
</head>
<body>
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MC35ML" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div id="DocsAnalyticsData" data-area="UnityServices" data-pagetype="normal"></div>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div class="logo"><a href="https://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul>
<li><a href="../Manual/index.html" class="selected">Manual</a></li>
<li><a href="../ScriptReference/index.html">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity3d.com/">unity3d.com</a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="version-number">Version: <b>2018.2</b> (switch to <a href="https://docs.unity3d.com/2018.3/Documentation/Manual">2018.3b</a> or <a href="https://docs.unity3d.com/2017.4/Documentation/Manual">2017.4</a>)</div>
<div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">Language: <span class="b">English</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/UnityIAPMoolahMooStore.html">English</a></li>
<li><a href="/ja/current/Manual/UnityIAPMoolahMooStore.html">日本語</a></li>
<li><a href="/es/current/Manual/UnityIAPMoolahMooStore.html">Español</a></li>
<li><a href="/kr/current/Manual/UnityIAPMoolahMooStore.html">한국어</a></li>
<li><a href="/ru/current/Manual/UnityIAPMoolahMooStore.html">Русский</a></li>
</ul></div>
</div>
</div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc"><h2>Unity Manual</h2></div></div></div></div></div>
<div id="content-wrap" class="content-wrap"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity User Manual (2018.2)</a></li>
<li><a href="UnityServices.html">Unity Services</a></li>
<li><a href="UnityIAP.html">﻿Unity IAP</a></li>
<li>Store Guides</li>
<li> CloudMoolah MOO store</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="UnityIAPSamsungGalaxy.html"></a></span><div class="tip"> Samsung Galaxy apps</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UnityIAPXiaomi.html"></a></span><div class="tip">Unity IAP Xiaomi integration guide</div>
</div>
</div></div>
<div class="otherversionswrapper" onmouseover="setOtherVersionsDisplay(true)" onmouseout="setOtherVersionsDisplay(false)">
<a>Other Versions</a><div class="otherversionscontent" id="OtherVersionsContent" style="display: none;">Cannot access other versions offline!</div>
</div>
<div class="scrollToFeedback"><a id="scrollToFeedback">Leave feedback</a></div>
<h1>CloudMoolah MOO store</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>The CloudMoolah MOO Store is a commercial service that enables people to buy and sell mobile apps. It also provides In-App Purchasing (IAP) services for apps distributed through the store. This guide describes the end-to-end process for a developer adding IAP services to a game that they publish to the CloudMoolah MOO Store.</p>

<p>The MOO Store serves Asian markets including the Philippines, Malaysia, Vietnam, Singapore, and Thailand. Users maintain a digital wallet, which they can fund using a variety of payment providers, such as mobile-pay, banks, and convenience store prepaid cards.</p>

<p>Although compatible with Unity, the CloudMoolah MOO Store is not a Unity product. For more information, see the CloudMoolah Developer Portal website at <a href="https://dev.cloudmoolah.com/">dev.cloudmoolah.com</a>.</p>

<p>The general workflow for publishing your game to the store and adding IAP to your game is as follows:</p>

<ul>
<li>Register your game as an app in the CloudMoolah store</li>
<li>Add items in the store that you can add to your game for purchase</li>
<li>Add the CloudMoolah store initialization code to your game</li>
<li>Test the integration</li>
<li>Publish the game to the CloudMoolah store</li>
</ul>

<h2>Getting started</h2>

<p>Your game must be built as an Android app. For information on building as an Android app, see <a href="android-GettingStarted.html">Getting started with Android development</a>.</p>

<p>To register your game as an available app in the CloudMoolah store:</p>

<ol>
<li><p>Sign in to the <a href="https://dev.cloudmoolah.com/">CloudMoolah Developer Portal</a>.</p></li>
<li><p>Click <strong>App Listing</strong>.</p></li>
</ol>

<figure>
<img src="../uploads/Main/cloudmoolahdashboard.png" alt="CloudMoolah Store dashboard menu">
<figcaption>CloudMoolah Store dashboard menu</figcaption>
</figure>

<ol>
<li>On the App Listing page, click the <strong>CREATE NEW APP</strong> button.</li>
</ol>

<figure>
<img src="../uploads/Main/cloudmoolahapplisting.png" alt="CloudMoolah create new app button">
<figcaption>CloudMoolah create new app button</figcaption>
</figure>

<ol>
<li>
<p>On the <strong>App Detail</strong> page, enter the following information:</p>

<ol>
<li><p>In <strong>App Name</strong>, enter a name that will identify your game in the CloudMoolah store.</p></li>
<li><p>In <strong>BundelID</strong>, enter the Package name you used for your game in the Unity Editor.</p></li>
<li><p>In <strong>Currency Name</strong>, enter a name for the currency that players will use to complete the in-app purchase.</p></li>
<li><p>To create a HashKey that you will use in the initialization code for your app, click <strong>GENERATE</strong> next to the <strong>HMAC/HashKey</strong> field.</p></li>
<li><p>In the <strong>Notification HMAC</strong> field, enter the App ID. This value is used during initialization. </p></li>
<li><p>Click <strong>Save</strong>.</p></li>
</ol>
</li>
</ol>

<figure>
<img src="../uploads/Main/cloudmoolahapplisting2.png" alt="CloudMoolah create new app result">
<figcaption>CloudMoolah create new app result</figcaption>
</figure>

<h3>Add items that your users can purchase</h3>

<p>An in-app purchase is the transaction of exchanging money for digital goods inside an application. A platform’s store allows users to purchase products, which are digital goods. These products have an identifier, which is typically a string data type.</p>

<p>To add a purchasable item in the CloudMoolah Developer portal:</p>

<ol>
<li>On the <strong>App Listing</strong> page, click <strong>View IAP</strong>.</li>
</ol>

<figure>
<img src="../uploads/Main/cloudmoolahapplisting3.png" alt="CloudMoolah view IAP button">
<figcaption>CloudMoolah view IAP button</figcaption>
</figure>

<ol>
<li>On the__ IAP Listing__ page, click the <strong>CREATE NEW IAP</strong> button.</li>
</ol>

<figure>
<img src="../uploads/Main/cloudmoolahiaplist.png" alt="CloudMoolah create new IAP button">
<figcaption>CloudMoolah create new IAP button</figcaption>
</figure>

<ol>
<li>
<p>On the <strong>IAP Detail</strong> page, enter the following information:</p>

<ol>
<li><p>In the <strong>ProductID</strong> field, enter a string identifier that you will use in your code to enable purchase of the item in your game.</p></li>
<li><p>In the <strong>Amount</strong> field, enter the number cost of the item in the default currency you specified when you registered your game.</p></li>
<li><p>In the <strong>Product Name</strong> field, enter a name for the product.</p></li>
<li><p>In the <strong>Product Description</strong>, enter a description for the product.</p></li>
</ol>
</li>
</ol>

<figure>
<img src="../uploads/Main/cloudmoolahiaplist2.png" alt="CloudMoolah create new IAP result">
<figcaption>CloudMoolah create new IAP result</figcaption>
</figure>

<ol>
<li>Click <strong>SAVE</strong>.</li>
</ol>

<p>The item now appears on the <strong>IAP Listing</strong> page and you can reference it from your game to offer it to your users.</p>

<h3>Add IAP to your game</h3>

<p>To configure IAP in your game:</p>

<ol>
<li>Retrieve the appKey and hashKey for your app’s product from the MOO Store Developer Portal and store them for later use.</li>
</ol>

<p>An app targeting the CloudMoolah MOO Store must configure the CloudMoolah appKey and hashKey using the IMoolahConfiguration via the scripting API before initializing <span class="tooltip"><strong>Unity IAP</strong><span class="tooltiptext">See IAP <a href="UnityIAP.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#UnityIAP">Glossary</a></span></span></span>. Collect these variables’ values from the app’s CloudMoolah developer dashboard.</p>

<p>The following example configures and starts initialization of Unity IAP:</p>

<pre><code>using UnityEngine.Purchasing;
public class MyStore : IStoreListener
{
    public void InitializeStore()
    {
        var module = StandardPurchasingModule.Instance();
        var builder = ConfigurationBuilder.Instance(module);

        // Configure CloudMoolah
        builder.Configure&lt;IMoolahConfiguration&gt;().appKey = &quot;d93f4564c41d463ed3d3cd207594ee1b&quot;;
        builder.Configure&lt;IMoolahConfiguration&gt;().hashKey = &quot;cc&quot;;
        // For server-to-server (also called &quot;online&quot; games) transaction
        // logging, set IMoolahConfiguration.notificationURL.
        builder.Configure&lt;IMoolahConfiguration&gt;().notificationURL = &quot;https://gameserver.example.com/callback&quot;;
        builder.Configure&lt;IMoolahConfiguration&gt;().SetMode(CloudMoolahMode.Production);
        // Add purchasable products. The product must be defined in the store.
        // Unity IAP provides the *ProductType* enumeration to specify the durability 
        // of a purchasable product. CloudMoolah limits the product type to Consumable. 
        builder.AddProduct(&quot;100.gold.coins&quot;, ProductType.Consumable);

        // Start asynchronous IAP initialization.
        UnityPurchasing.Initialize(this, builder);
    }
}
</code></pre>

<ol>
<li>In the Unity Editor, set the Unity IAP Android target to CloudMoolah by selecting <strong>Window &gt; Unity IAP &gt; Android &gt; Target CloudMoolah</strong>. This sets CloudMoolah as the Android store that the game uses to fulfill IAP requests.</li>
</ol>

<figure>
<img src="../uploads/Main/unityeditorenablecloudmoolat.png" alt="Enable CloudMoolah in the Editor">
<figcaption>Enable CloudMoolah in the Editor</figcaption>
</figure>

<p>To set the target store in your initialization code, call the UnityPurchasingEditor.TargetAndroidStore function:</p>

<p>UnityPurchasingEditor.TargetAndroidStore(AndroidStore.CloudMoolah);</p>

<ol>
<li>Build a signed non-Development Build Android <span class="tooltip"><strong>APK</strong><span class="tooltiptext">The Android Package format output by Unity. An APK is automatically deployed to your device when you select File &gt; Build &amp; Run. <a href="android-BuildProcess.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#APK">Glossary</a></span></span></span> from your game. For more information, see <a href="android-GettingStarted.html">Getting started with Android development</a>.</li>
</ol>

<p>
<strong>Note</strong>: Take special precautions to safely store your <span class="tooltip"><strong>keystore</strong><span class="tooltiptext">An Android system that lets you store cryptographic key entries for enhanced device security. <a href="class-PlayerSettingsAndroid.html#keystore">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Keystore">Glossary</a></span></span></span> file. The original <strong>keystore</strong> is always required to update a published app.</p>

<p>For more information on setting up and configuring IAP, see <a href="UnityIAPSettingUp.html">Setting Up Unity IAP</a>, <a href="UnityIAPInitialization.html">Unity In-App Purchasing Initialization</a>, and <a href="https://unity3d.com/learn/tutorials/topics/analytics/integrating-unity-iap-your-game-beta">Integrating Unity In-App Purchasing with your game</a>.</p>

<h3>Test IAP</h3>

<p>The CloudMoolah MOO Store supports testing. To test your game in the CloudMoolah MOO Store, you must enable developer mode in the app before making purchases by calling the <code>IMoolahConfiguration.SetMode</code> function.</p>

<p>When you set the test mode in a build of your game, transactions are processed against a dummy offline store. This allows you to test the app’s purchasing logic without incurring real-world monetary costs related to the product.</p>

<p>To modify the game’s MOO Store test mode, create the ConfigurationBuilder instance and add the following line, then build and run the app to test its IAP logic:</p>

<pre><code>// TESTING: auto-approves all transactions
builder.Configure&lt;IMoolahConfiguration&gt;().SetMode(CloudMoolahMode.AlwaysSucceed);
</code></pre>

<p>To test error handling, configure the test mode to fail all transactions. To do this, use the CloudMoolahMode.AlwaysFailed enumeration:</p>

<pre><code>builder.Configure&lt;IMoolahConfiguration&gt;().SetMode(CloudMoolahMode.AlwaysFailed); // TESTING: always fails all transactions
</code></pre>

<p>Note: When you finish testing, remove the SetMode statement that configures developer mode, or change the parameter to use the CloudMoolahMode.Production enumeration value. This ensures users pay real-world money when the app is in use.</p>

<h3>Example implementation</h3>

<p>Unity IAP’s default integration includes an implementation script example that demonstrates how to use the required, and some of the optional, CloudMoolah scripting APIs.</p>

<p>To view the CloudMoolah-specific example:</p>

<ol>
<li><p>On your development machine, open the folder for the app in which you have enabled IAP.</p></li>
<li><p>Open the <em><span class="tooltip"><strong>Assets</strong><span class="tooltiptext">Any media or data that can be used in your game or project. An asset may come from a file created outside of Unity, such as a 3D model, an audio file or an image. You can also create some asset types in Unity, such as an Animator Controller, an Audio Mixer or a Render Texture. <a href="AssetWorkflow.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Asset">Glossary</a></span></span></span>/<span class="tooltip"><strong>Plugins</strong><span class="tooltiptext">A set of code created outside of Unity that creates functionality in Unity. There are two kinds of plugins you can use in Unity: Managed plugins (managed .NET assemblies created with tools like Visual Studio) and Native plugins (platform-specific native code libraries). <a href="Plugins.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Plugin">Glossary</a></span></span></span>/UnityPurchasing/script</em> folder.</p></li>
<li><p>In the script folder, open <em>IAPDemo.cs</em>.</p></li>
</ol>

<p>The example implements the <code>Awake</code> function, which calls the <code>IMoolahConfiguration</code> API to set <code>appKey</code> and <code>hashKey</code>. This connects your app to the CloudMoolah store server.</p>

<p>The <em>IAPDemo.cs</em> file also shows how to use optional API calls to configure test mode, and for extending functionality to include transaction restoration. For more information on the optional APIs, sign in to the CloudMoolah Developer Portal website at <a href="https://dev.cloudmoolah.com/">dev.cloudmoolah.com</a>.</p>

<hr>

<p><span class="page-edit"> 2018–03–07 Page amended with limited <a href="DocumentationEditorialReview.html">editorial review</a>
</span></p>
<div class="feedbackbox" id="feedbackbox">
<div id="rating"><p>Did you find this page useful? Please give it a rating:<br><div id="ratecontent" class="c-rating"></div>
</p></div>
<div id="ratingThanks" style="display:none"><p>Thanks for rating this page!</p></div>
<div id="problem"><p><a name="problem">Report a problem on this page</a></p></div>
<div id="problemType" style="display:none"><p>What kind of problem would you like to report?<ul type="problems">
<li><a name="needcode" id="problemneedcode">This page needs code samples</a></li>
<li><a name="code" id="problemcode">Code samples do not work</a></li>
<li><a name="missing" id="problemmissing">Information is missing</a></li>
<li><a name="incorrect" id="problemincorrect">Information is incorrect</a></li>
<li><a name="unclear" id="problemunclear">Information is unclear or confusing</a></li>
<li><a name="language" id="problemlanguage">There is a spelling/grammar error on this page</a></li>
<li><a name="other" id="problemother">Something else</a></li>
</ul>
<p><known_issues><p>Is something described here not working as you expect it to? It might be a <b>Known Issue</b>. Please check with the Issue Tracker at <a href="https://issuetracker.unity3d.com">issuetracker.unity3d.com</a>.</p></known_issues></p>
</p></div>
<div id="problemThanks" style="display:none"><p>Thanks for letting us know! This page has been marked for review based on your feedback.<br><br>If you have time, you can provide more information to help us fix the problem faster.<br><br><a id="problemThanksMoreInfoButton">Provide more information</a><br>
</p></div>
<div id="problemMoreInfo" style="display:none">
<p id="problemNeedCodeForm" style="display:none">You've told us this page needs code samples. If you'd like to help us further, you could provide a code sample, or tell us about what kind of code sample you'd like to see:</p>
<p id="problemCodeForm" style="display:none">You've told us there are code samples on this page which don't work. If you know how to fix it, or have something better we could use instead, please let us know:</p>
<p id="problemMissingForm" style="display:none">You've told us there is information missing from this page. Please tell us more about what's missing:</p>
<p id="problemIncorrectForm" style="display:none">You've told us there is incorrect information on this page. If you know what we should change to make it correct, please tell us:</p>
<p id="problemUnclearForm" style="display:none">You've told us this page has unclear or confusing information. Please tell us more about what you found unclear or confusing, or let us know how we could make it clearer:</p>
<p id="problemLanguageForm" style="display:none">You've told us there is a spelling or grammar error on this page. Please tell us what's wrong:</p>
<p id="problemOtherForm" style="display:none">You've told us this page has a problem. Please tell us more about what's wrong:</p>
<form>
<textarea id="problemFormSuggestionField" cols="40" rows="5"></textarea><input type="hidden" id="problemFormDescription"><input type="submit" id="problemFormDescriptionSubmit" value="Submit">
</form>
</div>
<div id="problemMoreInfoThanks" style="display:none"><p>Thanks for helping to make the Unity documentation better!</p></div>
<script>InitialiseStarRating();</script>
</div>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="UnityIAPSamsungGalaxy.html"></a></span><div class="tip"> Samsung Galaxy apps</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UnityIAPXiaomi.html"></a></span><div class="tip">Unity IAP Xiaomi integration guide</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">Copyright © 2018 Unity Technologies. Publication: 2018.2-002K. Built: 2018-10-10.</div>
<div class="menu">
<a href="https://unity3d.com/learn">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a>
</div>
</div></div>
</div></div></div>
</div>
</body>
</html>
