<!DOCTYPE html><html lang="en" class="no-js">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],   j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-MC35ML');</script><script src="https://store.unity.com/themes/contrib/unity_base/js/unity-cdp.js"></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unity - Manual:  Writing Surface Shaders</title>
<meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="../StaticFilesManual/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFilesManual/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFilesManual/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFilesManual/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="../StaticFilesManual/js/jquery.js?ts=1539961666"></script><script type="text/javascript" src="../StaticFilesManual/js/core.js?ts=1539961666"></script><script type="text/javascript" src="docdata/toc.js?ts=1539961666"></script><script type="text/javascript" src="docdata/global_toc.js?ts=1539961666"></script><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,400italic" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="../StaticFilesManual/css/core.css?ts=1539961666">
<link rel="stylesheet" href="../StaticFilesManual/js/feedback/five-star-rating-master/css/rating.min.css">
<script src="../StaticFilesManual/js/feedback/five-star-rating-master/js/src/rating.js"></script>
</head>
<body>
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MC35ML" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div id="DocsAnalyticsData" data-area="Graphics" data-pagetype="normal"></div>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div class="logo"><a href="https://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul>
<li><a href="../Manual/index.html" class="selected">Manual</a></li>
<li><a href="../ScriptReference/index.html">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity3d.com/">unity3d.com</a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="version-number">Version: <b>2018.2</b> (switch to <a href="https://docs.unity3d.com/2018.3/Documentation/Manual">2018.3b</a> or <a href="https://docs.unity3d.com/2017.4/Documentation/Manual">2017.4</a>)</div>
<div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">Language: <span class="b">English</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/SL-SurfaceShaders.html">English</a></li>
<li><a href="/ja/current/Manual/SL-SurfaceShaders.html">日本語</a></li>
<li><a href="/es/current/Manual/SL-SurfaceShaders.html">Español</a></li>
<li><a href="/kr/current/Manual/SL-SurfaceShaders.html">한국어</a></li>
<li><a href="/ru/current/Manual/SL-SurfaceShaders.html">Русский</a></li>
</ul></div>
</div>
</div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc"><h2>Unity Manual</h2></div></div></div></div></div>
<div id="content-wrap" class="content-wrap"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity User Manual (2018.2)</a></li>
<li><a href="Graphics.html">Graphics</a></li>
<li><a href="GraphicsReference.html">Graphics Reference</a></li>
<li><a href="SL-Reference.html"> Shader Reference</a></li>
<li> Writing Surface Shaders</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="SL-Reference.html"></a></span><div class="tip"> Shader Reference</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="SL-SurfaceShaderExamples.html"></a></span><div class="tip">Surface Shader examples</div>
</div>
</div></div>
<div class="otherversionswrapper" onmouseover="setOtherVersionsDisplay(true)" onmouseout="setOtherVersionsDisplay(false)">
<a>Other Versions</a><div class="otherversionscontent" id="OtherVersionsContent" style="display: none;">Cannot access other versions offline!</div>
</div>
<div class="scrollToFeedback"><a id="scrollToFeedback">Leave feedback</a></div>
<h1>Writing Surface Shaders</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>Writing <span class="tooltip"><strong>shaders</strong><span class="tooltiptext">A small script that contains the mathematical calculations and algorithms for calculating the Color of each pixel rendered, based on the lighting input and the Material configuration. <a href="Shaders.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#shader">Glossary</a></span></span></span> that interact with lighting is complex. There are different light types, different shadow options, different <span class="tooltip"><strong>rendering</strong><span class="tooltiptext">The process of drawing graphics to the screen (or to a render texture). By default, the main camera in Unity renders its view to the screen. <a href="GraphicsOverview.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Rendering">Glossary</a></span></span></span> paths (forward and deferred rendering), and the shader should somehow handle all that complexity.</p>

<p>
<strong>Surface Shaders</strong> in Unity is a code generation approach that makes it much easier to write lit shaders than using low level <a href="SL-ShaderPrograms.html">vertex/pixel shader programs</a>. Note that there are no custom languages, magic or ninjas involved in Surface Shaders; it just generates all the repetitive code that would have to be written by hand. You still write shader code in HLSL.</p>

<p>For some examples, take a look at <a href="SL-SurfaceShaderExamples.html">Surface Shader Examples</a> and <a href="SL-SurfaceShaderLightingExamples.html">Surface Shader Custom Lighting Examples</a>.</p>

<h2>How it works</h2>

<p>You define a “surface function” that takes any UVs or data you need as input, and fills in output structure <code>SurfaceOutput</code>. SurfaceOutput basically describes <em>properties of the surface</em> (it’s albedo color, normal, emission, specularity etc.). You write this code in HLSL.</p>

<p>Surface Shader compiler then figures out what inputs are needed, what outputs are filled and so on, and generates actual <a href="SL-ShaderPrograms.html">vertex&amp;pixel shaders</a>, as well as rendering passes to handle forward and deferred rendering.</p>

<p>Standard output structure of surface shaders is this:</p>

<pre><code>struct SurfaceOutput
{
    fixed3 Albedo;  // diffuse color
    fixed3 Normal;  // tangent space normal, if written
    fixed3 Emission;
    half Specular;  // specular power in 0..1 range
    fixed Gloss;    // specular intensity
    fixed Alpha;    // alpha for transparencies
};
</code></pre>

<p>In Unity 5, surface shaders can also use physically based lighting models. Built-in Standard and StandardSpecular lighting models (see below) use these output structures respectively:</p>

<pre><code>struct SurfaceOutputStandard
{
    fixed3 Albedo;      // base (diffuse or specular) color
    fixed3 Normal;      // tangent space normal, if written
    half3 Emission;
    half Metallic;      // 0=non-metal, 1=metal
    half Smoothness;    // 0=rough, 1=smooth
    half Occlusion;     // occlusion (default 1)
    fixed Alpha;        // alpha for transparencies
};
struct SurfaceOutputStandardSpecular
{
    fixed3 Albedo;      // diffuse color
    fixed3 Specular;    // specular color
    fixed3 Normal;      // tangent space normal, if written
    half3 Emission;
    half Smoothness;    // 0=rough, 1=smooth
    half Occlusion;     // occlusion (default 1)
    fixed Alpha;        // alpha for transparencies
};
</code></pre>

<h2>Samples</h2>

<p>See <a href="SL-SurfaceShaderExamples.html">Surface Shader Examples</a>, <a href="SL-SurfaceShaderLightingExamples.html">Surface Shader Custom Lighting Examples</a> and <a href="SL-SurfaceShaderTessellation.html">Surface Shader Tessellation</a> pages.</p>

<h2>Surface Shader compile directives</h2>

<p>Surface shader is placed inside <code>CGPROGRAM..ENDCG</code> block, just like any other shader. The differences are:</p>

<ul>
<li>It must be placed inside <span class="tooltip"><a href="SL-SubShader.html">SubShader</a><span class="tooltiptext">Each shader in Unity consists of a list of subshaders. When Unity has to display a mesh, it will find the shader to use, and pick the first subshader that runs on the user’s graphics card. <a href="SL-SubShader.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#subshader">Glossary</a></span></span></span> block, not inside <a href="SL-Pass.html">Pass</a>. Surface shader will compile into multiple passes itself.</li>
<li>It uses <code>#pragma surface ...</code> directive to indicate it’s a surface shader.</li>
</ul>

<p>The <code>#pragma surface</code> directive is:</p>

<pre><code>#pragma surface surfaceFunction lightModel [optionalparams]
</code></pre>

<h3>Required parameters</h3>

<ul>
<li>
<code>surfaceFunction</code> - which Cg function has surface shader code. The function should have the form of <code>void surf (Input IN, inout SurfaceOutput o)</code>, where Input is a structure you have defined. Input should contain any texture coordinates and extra automatic variables needed by surface function.</li>
<li>
<code>lightModel</code> - lighting model to use. Built-in ones are physically based <code>Standard</code> and <code>StandardSpecular</code>, as well as simple non-physically based <code>Lambert</code> (diffuse) and <code>BlinnPhong</code> (specular). See <a href="SL-SurfaceShaderLighting.html">Custom Lighting Models</a> page for how to write your own.

<ul>
<li>
<code>Standard</code> lighting model uses <code>SurfaceOutputStandard</code> output struct, and matches the Standard (metallic workflow) shader in Unity.</li>
<li>
<code>StandardSpecular</code> lighting model uses <code>SurfaceOutputStandardSpecular</code> output struct, and matches the Standard (specular setup) shader in Unity.</li>
<li>
<code>Lambert</code> and <code>BlinnPhong</code> lighting models are not physically based (coming from Unity 4.x), but the shaders using them can be faster to render on low-end hardware.</li>
</ul>
</li>
</ul>

<h3>Optional parameters</h3>

<p>
<strong>Transparency and alpha testing</strong> is controlled by <code>alpha</code> and <code>alphatest</code> directives. Transparency can typically be of two kinds: traditional alpha blending (used for fading objects out) or more physically plausible “premultiplied blending” (which allows semitransparent surfaces to retain proper specular reflections). Enabling semitransparency makes the generated surface shader code contain <a href="SL-Blend.html">blending</a> commands; whereas enabling alpha cutout will do a fragment discard in the generated <span class="tooltip"><strong>pixel</strong><span class="tooltiptext">The smallest unit in a computer image. Pixel size depends on your screen resolution. Pixel lighting is calculated at every screen pixel. <a href="LightPerformance.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#pixel">Glossary</a></span></span></span> shader, based on the given variable.</p>

<ul>
<li>
<code>alpha</code> or <code>alpha:auto</code> - Will pick fade-transparency (same as <code>alpha:fade</code>) for simple lighting functions, and premultiplied transparency (same as <code>alpha:premul</code>) for physically based lighting functions.</li>
<li>
<code>alpha:blend</code> - Enable alpha blending.</li>
<li>
<code>alpha:fade</code> - Enable traditional fade-transparency.</li>
<li>
<code>alpha:premul</code> - Enable premultiplied alpha transparency.</li>
<li>
<code>alphatest:VariableName</code> - Enable alpha cutout transparency. Cutoff value is in a float variable with VariableName. You’ll likely also want to use <code>addshadow</code> directive to generate proper shadow caster pass.</li>
<li>
<code>keepalpha</code> - By default opaque surface shaders write 1.0 (white) into alpha channel, no matter what’s output in the Alpha of output struct or what’s returned by the lighting function. Using this option allows keeping lighting function’s alpha value even for opaque surface shaders.</li>
<li>
<code>decal:add</code> - Additive decal shader (e.g. terrain AddPass). This is meant for objects that lie atop of other surfaces, and use additive blending. See <a href="SL-SurfaceShaderExamples.html">Surface Shader Examples</a>
</li>
<li>
<code>decal:blend</code> - Semitransparent decal shader. This is meant for objects that lie atop of other surfaces, and use alpha blending. See <a href="SL-SurfaceShaderExamples.html">Surface Shader Examples</a>
</li>
</ul>

<p>
<strong>Custom modifier functions</strong> can be used to alter or compute incoming vertex data, or to alter final computed fragment color.</p>

<ul>
<li>
<code>vertex:VertexFunction</code> - Custom vertex modification function. This function is invoked at start of generated <span class="tooltip"><strong>vertex shader</strong><span class="tooltiptext">A program that runs on each vertex of a 3D model when the model is being rendered. <a href="SL-ShaderPrograms.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#vertexshader">Glossary</a></span></span></span>, and can modify or compute per-vertex data. See <a href="SL-SurfaceShaderExamples.html">Surface Shader Examples</a>.</li>
<li>
<code>finalcolor:ColorFunction</code> - Custom final color modification function. See <a href="SL-SurfaceShaderExamples.html">Surface Shader Examples</a>.</li>
<li>
<code>finalgbuffer:ColorFunction</code> - Custom deferred path for altering gbuffer content.</li>
<li>
<code>finalprepass:ColorFunction</code> - Custom prepass base path.</li>
</ul>

<p>
<strong>Shadows and Tessellation</strong> - additional directives can be given to control how shadows and tessellation is handled.</p>

<ul>
<li>
<code>addshadow</code> - Generate a shadow caster pass. Commonly used with custom vertex modification, so that shadow casting also gets any procedural vertex animation. Often shaders don’t need any special shadows handling, as they can just use shadow caster pass from their fallback.</li>
<li>
<code>fullforwardshadows</code> - Support all light shadow types in <a href="RenderTech-ForwardRendering.html">Forward</a> <span class="tooltip"><strong>rendering path</strong><span class="tooltiptext">The technique Unity uses to render graphics. Choosing a different path affects the performance of your game, and how lighting and shading are calculated. Some paths are more suited to different platforms and hardware than others. <a href="RenderingPaths.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#RenderingPath">Glossary</a></span></span></span>. By default shaders only support shadows from one directional light in <span class="tooltip"><strong>forward rendering</strong><span class="tooltiptext">A rendering path that renders each object in one or more passes, depending on lights that affect the object. Lights themselves are also treated differently by Forward Rendering, depending on their settings and intensity. <a href="RenderTech-ForwardRendering.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#ForwardRendering">Glossary</a></span></span></span> (to save on internal shader variant count). If you need point or spot light shadows in forward rendering, use this directive.</li>
<li>
<code>tessellate:TessFunction</code> - use DX11 GPU tessellation; the function computes tessellation factors. See <a href="SL-SurfaceShaderTessellation.html">Surface Shader Tessellation</a> for details.</li>
</ul>

<p>
<strong>Code generation options</strong> - by default generated surface shader code tries to handle all possible lighting/shadowing/<span class="tooltip"><strong>lightmap</strong><span class="tooltiptext">A pre-rendered texture that contains the effects of light sources on static objects in the scene. Lightmaps are overlaid on top of scene geometry to create the effect of lighting. <a href="Lightmapping.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Lightmap">Glossary</a></span></span></span> scenarios. However in some cases you know you won’t need some of them, and it is possible to adjust generated code to skip them. This can result in smaller shaders that are faster to load.</p>

<ul>
<li>
<code>exclude_path:deferred</code>, <code>exclude_path:forward</code>, <code>exclude_path:prepass</code> - Do not generate passes for given rendering path (<span class="tooltip"><a href="RenderTech-DeferredShading.html">Deferred Shading</a><span class="tooltiptext">A rendering path that places no limit on the number of lights that can affect a GameObject. All lights are evaluated per-pixel, which means that they all interact correctly with normal maps and so on. Additionally, all lights can have cookies and shadows. <a href="RenderTech-DeferredShading.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Deferredshading">Glossary</a></span></span></span>, <a href="RenderTech-ForwardRendering.html">Forward</a> and <a href="RenderTech-DeferredLighting.html">Legacy Deferred</a> respectively).</li>
<li>
<code>noshadow</code> - Disables all shadow receiving support in this shader.</li>
<li>
<code>noambient</code> - Do not apply any ambient lighting or <span class="tooltip"><strong>light probes</strong><span class="tooltiptext">Light probes store information about how light passes through space in your scene. A collection of light probes arranged within a given space can improve lighting on moving objects and static LOD scenery within that space. <a href="LightProbes.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#LightProbe">Glossary</a></span></span></span>.</li>
<li>
<code>novertexlights</code> - Do not apply any light probes or per-vertex lights in Forward rendering.</li>
<li>
<code>nolightmap</code> - Disables all lightmapping support in this shader.</li>
<li>
<code>nodynlightmap</code> - Disables runtime dynamic global illumination support in this shader.</li>
<li>
<code>nodirlightmap</code> - Disables directional lightmaps support in this shader.</li>
<li>
<code>nofog</code> - Disables all built-in Fog support.</li>
<li>
<code>nometa</code> - Does not generate a “meta” pass (that’s used by lightmapping &amp; dynamic global illumination to extract surface information).</li>
<li>
<code>noforwardadd</code> - Disables <a href="RenderTech-ForwardRendering.html">Forward</a> rendering additive pass. This makes the shader support one full directional light, with all other lights computed per-vertex/SH. Makes shaders smaller as well.</li>
<li>
<code>nolppv</code> - Disables <span class="tooltip"><strong>Light Probe Proxy Volume</strong><span class="tooltiptext">A component that allows you to use more lighting information for large dynamic GameObjects that cannot use baked lightmaps (for example, large Particle Systems or skinned Meshes). <a href="class-LightProbeProxyVolume.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#LightProbeProxyVolume">Glossary</a></span></span></span> support in this shader.</li>
<li>
<code>noshadowmask</code> - Disables Shadowmask support for this shader (both <span class="tooltip"><a href="LightMode-Mixed-Shadowmask.html">Shadowmask</a><span class="tooltiptext">A Texture that shares the same UV layout and resolution with its corresponding lightmap. <a href="LightMode-Mixed-Shadowmask.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Shadowmask">Glossary</a></span></span></span> and <span class="tooltip"><a href="LightMode-Mixed-DistanceShadowmask.html">Distance Shadowmask</a><span class="tooltiptext">A version of the Shadowmask lighting mode that includes high quality shadows cast from static GameObjects onto dynamic GameObjects. <a href="LightMode-Mixed-DistanceShadowmask.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#DistanceShadowmask">Glossary</a></span></span></span>).</li>
</ul>

<p><strong>Miscellaneous options</strong></p>

<ul>
<li>
<code>softvegetation</code> - Makes the surface shader only be rendered when Soft Vegetation is on.</li>
<li>
<code>interpolateview</code> - Compute view direction in the vertex shader and interpolate it; instead of computing it in the pixel shader. This can make the pixel shader faster, but uses up one more texture interpolator.</li>
<li>
<code>halfasview</code> - Pass half-direction vector into the lighting function instead of view-direction. Half-direction will be computed and normalized per vertex. This is faster, but not entirely correct.</li>
<li>
<code>approxview</code> - Removed in Unity 5.0. Use <code>interpolateview</code> instead.</li>
<li>
<code>dualforward</code> - Use <a href="GIIntro.html">dual lightmaps</a> in <a href="RenderTech-ForwardRendering.html">forward</a> rendering path.</li>
<li>
<code>dithercrossfade</code> - Makes the surface shader support dithering effects. You can then apply this shader to <span class="tooltip"><strong>GameObjects</strong><span class="tooltiptext">The fundamental object in Unity scenes, which can represent characters, props, scenery, cameras, waypoints, and more. A GameObject’s functionality is defined by the Components attached to it. <a href="class-GameObject.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#GameObject">Glossary</a></span></span></span> that use an <span class="tooltip"><a href="class-LODGroup.html">LOD Group</a><span class="tooltiptext">A component to manage level of detail (LOD) for GameObjects. <a href="class-LODGroup.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#LODGroup">Glossary</a></span></span></span> <span class="tooltip"><strong>component</strong><span class="tooltiptext">A functional part of a GameObject. A GameObject can contain any number of components. Unity has many built-in components, and you can create your own by writing scripts that inherit from MonoBehaviour. <a href="UsingComponents.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#component">Glossary</a></span></span></span> configured for cross-fade transition mode.</li>
</ul>

<p>To see what exactly is different from using different options above, it can be helpful to use “Show Generated Code” button in the <a href="class-Shader.html">Shader Inspector</a>.</p>

<h2>Surface Shader input structure</h2>

<p>The input structure <code>Input</code> generally has any texture coordinates needed by the shader. Texture coordinates must be named “<code>uv</code>” followed by texture name (or start it with “<code>uv2</code>” to use second texture coordinate set).</p>

<p>Additional values that can be put into Input structure:</p>

<ul>
<li>
<code>float3 viewDir</code> - contains view direction, for computing Parallax effects, rim lighting <span class="tooltip"><strong>etc</strong><span class="tooltiptext">(Ericsson Texture Compression) A block-based texture format that compresses textures to significantly reduce file sizes without causing a noticable reduction in image quality. <a href="class-TextureImporterOverride.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#ETC">Glossary</a></span></span></span>.</li>
<li>
<code>float4</code> with <code>COLOR</code> semantic - contains interpolated per-vertex color.</li>
<li>
<code>float4 screenPos</code> - contains screen space position for reflection or screenspace effects. Note that this is not suitable for <a href="SL-GrabPass.html">GrabPass</a>; you need to compute custom UV yourself using <code>ComputeGrabScreenPos</code> function.</li>
<li>
<code>float3 worldPos</code> - contains world space position.</li>
<li>
<code>float3 worldRefl</code> - contains world reflection vector <em>if surface shader does not write to o.Normal</em>. See Reflect-Diffuse shader for example.</li>
<li>
<code>float3 worldNormal</code> - contains world normal vector <em>if surface shader does not write to o.Normal</em>.</li>
<li>
<code>float3 worldRefl; INTERNAL_DATA</code> - contains world reflection vector <em>if surface shader writes to o.Normal</em>. To get the reflection vector based on per-pixel normal map, use <code>WorldReflectionVector (IN, o.Normal)</code>. See Reflect-Bumped shader for example.</li>
<li>
<code>float3 worldNormal; INTERNAL_DATA</code> - contains world normal vector <em>if surface shader writes to o.Normal</em>. To get the normal vector based on per-pixel normal map, use <code>WorldNormalVector (IN, o.Normal)</code>.</li>
</ul>

<h2>Surface Shaders and DirectX 11 HLSL syntax</h2>

<p>Currently some parts of surface shader compilation pipeline do not understand <a href="UsingDX11GL3Features.html">DirectX 11</a>-specific HLSL syntax, so if you’re using HLSL features like StructuredBuffers, RWTextures and other non-DX9 syntax, you have to wrap it into a DX11-only preprocessor macro.</p>

<p>See <a href="SL-PlatformDifferences.html">Platform Specific Differences</a> and <a href="SL-ShadingLanguage.html">Shading Language</a> pages for details.</p>

<hr>

<ul>
<li><p><span class="page-edit"> 2017–06–08 Page published with limited <a href="DocumentationEditorialReview.html">editorial review</a>
</span></p></li>
<li><p><span class="page-history"><code>noshadowmask</code> added in 5.6</span></p></li>
</ul>
<div class="feedbackbox" id="feedbackbox">
<div id="rating"><p>Did you find this page useful? Please give it a rating:<br><div id="ratecontent" class="c-rating"></div>
</p></div>
<div id="ratingThanks" style="display:none"><p>Thanks for rating this page!</p></div>
<div id="problem"><p><a name="problem">Report a problem on this page</a></p></div>
<div id="problemType" style="display:none"><p>What kind of problem would you like to report?<ul type="problems">
<li><a name="needcode" id="problemneedcode">This page needs code samples</a></li>
<li><a name="code" id="problemcode">Code samples do not work</a></li>
<li><a name="missing" id="problemmissing">Information is missing</a></li>
<li><a name="incorrect" id="problemincorrect">Information is incorrect</a></li>
<li><a name="unclear" id="problemunclear">Information is unclear or confusing</a></li>
<li><a name="language" id="problemlanguage">There is a spelling/grammar error on this page</a></li>
<li><a name="other" id="problemother">Something else</a></li>
</ul>
<p><known_issues><p>Is something described here not working as you expect it to? It might be a <b>Known Issue</b>. Please check with the Issue Tracker at <a href="https://issuetracker.unity3d.com">issuetracker.unity3d.com</a>.</p></known_issues></p>
</p></div>
<div id="problemThanks" style="display:none"><p>Thanks for letting us know! This page has been marked for review based on your feedback.<br><br>If you have time, you can provide more information to help us fix the problem faster.<br><br><a id="problemThanksMoreInfoButton">Provide more information</a><br>
</p></div>
<div id="problemMoreInfo" style="display:none">
<p id="problemNeedCodeForm" style="display:none">You've told us this page needs code samples. If you'd like to help us further, you could provide a code sample, or tell us about what kind of code sample you'd like to see:</p>
<p id="problemCodeForm" style="display:none">You've told us there are code samples on this page which don't work. If you know how to fix it, or have something better we could use instead, please let us know:</p>
<p id="problemMissingForm" style="display:none">You've told us there is information missing from this page. Please tell us more about what's missing:</p>
<p id="problemIncorrectForm" style="display:none">You've told us there is incorrect information on this page. If you know what we should change to make it correct, please tell us:</p>
<p id="problemUnclearForm" style="display:none">You've told us this page has unclear or confusing information. Please tell us more about what you found unclear or confusing, or let us know how we could make it clearer:</p>
<p id="problemLanguageForm" style="display:none">You've told us there is a spelling or grammar error on this page. Please tell us what's wrong:</p>
<p id="problemOtherForm" style="display:none">You've told us this page has a problem. Please tell us more about what's wrong:</p>
<form>
<textarea id="problemFormSuggestionField" cols="40" rows="5"></textarea><input type="hidden" id="problemFormDescription"><input type="submit" id="problemFormDescriptionSubmit" value="Submit">
</form>
</div>
<div id="problemMoreInfoThanks" style="display:none"><p>Thanks for helping to make the Unity documentation better!</p></div>
<script>InitialiseStarRating();</script>
</div>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="SL-Reference.html"></a></span><div class="tip"> Shader Reference</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="SL-SurfaceShaderExamples.html"></a></span><div class="tip">Surface Shader examples</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">Copyright © 2018 Unity Technologies. Publication: 2018.2-002K. Built: 2018-10-10.</div>
<div class="menu">
<a href="https://unity3d.com/learn">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a>
</div>
</div></div>
</div></div></div>
</div>
</body>
</html>
